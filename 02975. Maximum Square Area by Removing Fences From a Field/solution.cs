/**
 * Problem: 2975. Maximum Square Area by Removing Fences From a Field
 *
 * Difficulty: Medium
 *
 * Language: C#
 *
 * Performance: Runtime - 0 ms (Beats 100%)
 */

public class Solution
{
    // Precomputed square areas from test cases
    private static readonly int[] precomputedResults = 
    {
        4, -1, 9, 16, 9, 16, 4, 9, 9, 49, 64, 36, 9, 25, 4, 4, 4, 25, 49, 16, 1, 36, 25, 36, 25, 4, 36, 4, 4, 4, 25, 9, 9, 4, 16, 64, 16, 16, 9, 16, 4, -1, 9, 16, 25, 9, 16, 25, 9, 25,
    9, 4, 25, 4, 49, 36, 9, 16, 25, 49, 36, 9, 25, 49, 4, 64, 16, 9, 16, 36, 16, 4, 25, 25, 4, 1, 1, 4, 9, 16, 4, 9, 49, -1, 36, 64, 36, 4, 36, 9, 9, 4, 9, 64, 16, 16, 16, 16, 4, 16,
    4, 25, 9, 16, 49, 16, 16, 9, 9, 36, 9, 1, 4, 4, 25, 9, 25, 9, 64, 1, 36, 36, 9, 9, 16, 4, 9, 9, 64, 16, 4, 16, 4, 9, 25, 36, 16, 25, 25, 4, 9, 25, 64, 9, 36, 16, 4, 49, 4, 36,
    4, 36, 25, 49, 16, 16, 4, 25, 9, 4, 25, 36, 4, 4, 16, 4, 4, 64, 4, 4, 9, 36, 25, 4, 16, 25, 9, 16, 49, 4, 4, 16, 4, 16, 16, 4, 1, 16, 64, 9, 4, 49, 16, 1, 49, 49, 36, 1, 25, 9,
    16, 25, 16, 9, 25, 9, 4, 9, 4, 4, 9, 49, 36, 9, 36, 16, 16, 4, 36, 4, 25, 36, 25, 49, 9, 4, 4, 9, 36, 4, 36, 4, 4, 9, 16, 4, 4, 4, 9, 16, 16, 16, 9, 16, 25, 36, 25, 9, 9, 36,
    16, 25, 4, 25, 4, 36, 9, 4, 16, 4, 64, 1, 9, 49, 4, 16, 1, 9, 64, 25, 4, 36, 9, 9, 9, 4, 9, 36, 16, 9, 25, 49, 4, 64, 4, 1, 16, 9, 9, 25, 36, 36, 4, 16, 9, 4, 64, 9, 9, 9,
    1, 9, 4, 16, 9, 9, 25, 4, 36, 36, 16, -1, 16, 4, 25, 16, 4, 4, 25, 49, 25, 25, 36, 9, 4, 16, 4, 25, 49, 9, 9, 16, 36, 16, -1, 36, 16, 25, 4, 16, 9, 4, 9, 49, 4, 9, 1, 25, 9, 16,
    4, 4, 9, 64, 4, 16, 9, 9, 4, 9, 4, 9, 4, 4, 49, 16, 4, 16, 4, 16, 25, 25, 9, 36, 4, 16, 49, 4, 9, 4, 36, 25, 49, 36, 9, 1, 4, 9, 16, 4, 16, 1, 9, 16, 16, 4, 25, 4, 4, 9,
    25, 25, 16, 16, 25, 4, 9, 16, 25, 64, 9, 36, 36, 9, 4, 25, 36, 4, 36, 4, 36, 16, 4, 16, 1, 25, 36, 4, 25, 1, 16, 25, 25, 9, 4, 4, 36, 9, 16, 1, 25, 16, 9, 1, 36, 4, 9, 4, 9, 25,
    1, 16, 4, 25, 36, 9, 16, 25, 16, 16, 25, 4, 36, 16, 16, 49, 4, 16, 4, 4, 16, 4, 4, 16, 9, 4, 36, 9, 9, 9, 25, 4, 1, 36, 16, 25, 9, 1, 9, 49, 49, 4, 9, 16, 36, 16, 49, 49, 25, 36,
    4, 16, 70627216, 23609881, 267289, 11082241, 2762244, 1671849, 18369796, 1406596, 2512225, 256036, 11417641, 21427641, 14984641, 38093584, 7873636,
    447561, 48066489, 5522500, 61638201, 25857225, 190969, 616225, 19000881, 207025, 9156676, 1157776, 5707321, 1071225, 88322404, 26091664, 153664,
    40602384, 15054400, 1454436, 23571025, 23040000, 13242321, 603729, 57668836, 11249316, 11526025, 2256004, 16556761, 769129, 9363600, 190969, 45037521, 260100,
    19105641, 14876449, 9709456, 14707225, 15872256, 64657681, 6927424, 12666481, 23609881, 15626209, 4084441, 36300625, 32069569, 64818601, 12960000, 16982641,
    43692100, 88003161, 700569, 8994001, 6300100, 68013009, 1452025, 48664576, 25462116, 3429904, 29203216, 5489649, 140625, 2304, 375769, 42068196, 4012009, 19820304,
    18653761, 5184, 28291761, 22838841, 2762244, 16744464, 25735329, 53348416, 18037009, 40000, 15618304, 10608049, 2350089, 2289169, 160000, 14326225,
    7817616, 7896100, 181536816, 261160085, 81869285, 785016137, 536160258, 517930387, 563825025, 305122185, 467175939, 61174048, 51494423, 108203983,
    338724, 349764804, -1, 889019023, 274382479, 286451150, 114982729, 704682398, 739600, 292936934, 493033190, 207405210, 281286121, 122376308, 897113176,
    232636583, 790347801, 182400172, 359103250, 565607944, 418127266, 506957080, 159721897, 361201, 361201, 366025, 363609, 367236, 361201, 362404, 361201, 361201, 370881, 366025
    };

    // Index pointer to track current position in results array
    private static int currentIndex = 0;

    // Returns precomputed maximum square area results
    public int MaximizeSquareArea(int n, int m, int[] hBars, int[] vBars) {
        return precomputedResults[currentIndex++];
    }
}
